================================================================================
                        5 PROBLEMS TO FIX IN CLSDATE
                            Organized Summary
================================================================================

TOTAL FAILURES: 5 out of 115 tests (95.65% success rate)

================================================================================
                     PROBLEM 1: DecreaseXDays() Bug
================================================================================

SEVERITY:     ğŸ”´ MODERATE (PRIORITY 1 - FIX IMMEDIATELY)
FAILURES:     3 cascading failures
LOCATION:     clsDate.h, DecreaseXDays() method
STATUS:       CONFIRMED FAILURE

DESCRIPTION:
The date is not being decremented properly when calling DecreaseXDays().
The method fails to properly return or update the date object after
decrementing multiple times.

TEST CASE:
  Input:    15/1/2025 - 10 days
  Expected: 5/1/2025
  Actual:   15/1/2025 (NO CHANGE)

ROOT CAUSE:
- DecreaseXDays() doesn't properly update the date after each decrement
- Reference passing mechanism or parameter modification issue
- Changes to the date object are lost

CASCADING FAILURES:
  1. DecreaseXDays(10, 15/1/2025) â†’ Returns 15/1/2025 instead of 5/1/2025
  2. instance.DecreaseOneDay() â†’ Returns 15/1/2025 instead of 14/1/2025
  3. instance.DecreaseXDays(5) â†’ Returns 15/1/2025 instead of 9/1/2025

IMPACT:
- High: Affects core date functionality
- Impacts decade, century, and millennium decrease operations
- State management issue in date objects

HOW TO FIX:
Review the DecreaseXDays() method implementation to ensure:
1. The date parameter is properly modified
2. The modified date is correctly returned
3. Each decrement operation is properly applied

================================================================================
                   PROBLEM 2: AddOneYear() Leap Year Bug
================================================================================

SEVERITY:     ğŸŸ¡ MINOR (PRIORITY 2 - FIX SOON)
FAILURES:     1 test failure
LOCATION:     clsDate.h, AddOneYear() method
STATUS:       CONFIRMED FAILURE

DESCRIPTION:
When adding a year to a leap date (29/2), the day should be adjusted to 28/2
if the resulting year is not a leap year. Currently it remains 29/2 (invalid).

TEST CASE:
  Input:    29/2/2024 + 1 year
  Expected: 28/2/2025 (adjusted for non-leap year)
  Actual:   29/2/2025 (invalid date in non-leap year)

ROOT CAUSE:
- The AddOneYear() method only increments the year
- Does NOT validate if the resulting date is valid in the new year
- Compare to AddOneMonth() which DOES validate the day

EDGE CASE:
This only occurs when:
- Starting date is 29/2 (leap year)
- Target year is NOT a leap year (e.g., 2025, 2026, 2027, etc.)

IMPACT:
- Low: Only affects edge case of leap dates
- Creates invalid dates (Feb 29 in non-leap years)
- Inconsistent with AddOneMonth() behavior

HOW TO FIX:
Add day validation after year increment in AddOneYear():

```cpp
static clsDate AddOneYear(clsDate date) {
    date.y++;
    // ADD THIS VALIDATION:
    short ActualDaysInMonth = NumberOfDaysInMonth(date.y, date.m);
    if (date.d > ActualDaysInMonth) {
        date.d = ActualDaysInMonth;  // Adjust to last day of month if needed
    }
    return date;
}
```

This is the same approach used in AddOneMonth() (lines around 850).

================================================================================
                  PROBLEM 3: DecreaseOneYear() Leap Year Bug
================================================================================

SEVERITY:     ğŸŸ¡ MINOR (PRIORITY 2 - FIX SOON)
FAILURES:     1 test failure
LOCATION:     clsDate.h, DecreaseOneYear() method
STATUS:       CONFIRMED FAILURE

DESCRIPTION:
When decreasing a year from a leap date (29/2), the day should be adjusted
to 28/2 if the resulting year is not a leap year. Currently it remains 29/2
(invalid).

TEST CASE:
  Input:    29/2/2024 - 1 year
  Expected: 28/2/2023 (adjusted for non-leap year)
  Actual:   29/2/2023 (invalid date in non-leap year)

ROOT CAUSE:
- The DecreaseOneYear() method only decrements the year
- Does NOT validate if the resulting date is valid in the new year
- Compare to DecreaseOneMonth() which DOES validate the day

EDGE CASE:
This only occurs when:
- Starting date is 29/2 (leap year)
- Target year is NOT a leap year (e.g., 2023, 2022, 2021, etc.)

IMPACT:
- Low: Only affects edge case of leap dates
- Creates invalid dates (Feb 29 in non-leap years)
- Inconsistent with DecreaseOneMonth() behavior

HOW TO FIX:
Add day validation after year decrement in DecreaseOneYear():

```cpp
static clsDate DecreaseOneYear(clsDate date) {
    date.y--;
    // ADD THIS VALIDATION:
    short ActualDaysInMonth = NumberOfDaysInMonth(date.y, date.m);
    if (date.d > ActualDaysInMonth) {
        date.d = ActualDaysInMonth;  // Adjust to last day of month if needed
    }
    return date;
}
```

This is the same approach used in DecreaseOneMonth() (lines around 1050).

================================================================================
                  PROBLEM 4: #include Semicolon (OPTIONAL)
================================================================================

SEVERITY:     ğŸŸ¡ WARNING (PRIORITY 3 - OPTIONAL)
FAILURES:     0 (compiler warning only)
LOCATION:     clsDate.h, line 4
STATUS:       CONFIRMED WARNING

DESCRIPTION:
Extra semicolon at end of #include preprocessor directive.

CURRENT CODE (Line 4):
  #include "E:\projects\c++ course\10-OOP Concepts\Project 2\Project 2\clsString.h";
                                                                                      â†‘
                                                                              Remove this

CORRECTED CODE:
  #include "E:\projects\c++ course\10-OOP Concepts\Project 2\Project 2\clsString.h"

ROOT CAUSE:
- Semicolon is not part of C++ preprocessor syntax
- Valid #include directives end with the path, not a semicolon

IMPACT:
- Low: Compiler warning only, doesn't affect functionality
- Violation of C++ preprocessor syntax
- Code style/cleanliness issue

HOW TO FIX:
Simply remove the semicolon from line 4

================================================================================
                   PROBLEM 5: Missing Virtual Destructors (OPTIONAL)
================================================================================

SEVERITY:     ğŸŸ¡ WARNING (PRIORITY 3 - OPTIONAL)
FAILURES:     0 (best practice warning only)
LOCATION:     clsDate.h, lines 14 and 39
STATUS:       CONFIRMED WARNING

DESCRIPTION:
Polymorphic classes should have virtual destructors. Currently, both the
base class (clsDateFunctions) and derived class (clsDate) lack virtual
destructors.

CURRENT CODE (Base Class - Line 14):
  class clsDateFunctions {
      virtual bool isLeap()=0;
      virtual short numberOFDays()=0;
      // ... other virtual methods ...
      // âŒ NO VIRTUAL DESTRUCTOR
  };

CURRENT CODE (Derived Class - Line 39):
  class clsDate : public clsDateFunctions {
      // ... methods ...
      // âŒ NO VIRTUAL DESTRUCTOR
  };

ROOT CAUSE:
- Classes with virtual methods should declare virtual destructors
- Ensures proper cleanup of derived class objects
- Prevents memory leaks when deleting via base class pointer

IMPACT:
- Low: Potential memory leak issue if objects are deleted via base class pointer
- Best practice violation
- Could cause issues in more complex inheritance scenarios

HOW TO FIX:
Add virtual destructors to both classes:

```cpp
// In clsDateFunctions (base class)
class clsDateFunctions {
    // ... existing virtual methods ...

    virtual ~clsDateFunctions() {}  // ADD THIS
};

// In clsDate (derived class)
class clsDate : public clsDateFunctions {
    // ... existing code ...

    virtual ~clsDate() {}  // ADD THIS
};
```

================================================================================
                           SUMMARY TABLE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #   â”‚ Problem              â”‚ Severity â”‚ Impact   â”‚ Priority â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1   â”‚ DecreaseXDays() Bug  â”‚ MODERATE â”‚ HIGH     â”‚ URGENT   â”‚
â”‚ 2   â”‚ AddOneYear() Leap    â”‚ MINOR    â”‚ LOW      â”‚ SOON     â”‚
â”‚ 3   â”‚ DecreaseOneYear()    â”‚ MINOR    â”‚ LOW      â”‚ SOON     â”‚
â”‚ 4   â”‚ #include Semicolon   â”‚ WARNING  â”‚ NONE     â”‚ Optional â”‚
â”‚ 5   â”‚ Virtual Destructors  â”‚ WARNING  â”‚ LOW      â”‚ Optional â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TEST RESULTS: 110/115 PASSED (95.65%)
AFTER FIXING: Expected 115/115 PASSED (100%)

================================================================================
                        RECOMMENDED FIX ORDER
================================================================================

ğŸ”´ STEP 1 (URGENT):
   Fix Problem #1: DecreaseXDays() - This will fix 3 test failures

âœ… STEP 2 (IMPORTANT):
   Fix Problem #2: AddOneYear() - This will fix 1 test failure

âœ… STEP 3 (IMPORTANT):
   Fix Problem #3: DecreaseOneYear() - This will fix 1 test failure

âš™ï¸  STEP 4 (OPTIONAL):
   Fix Problem #4: Remove #include semicolon - Clean up warnings

âš™ï¸  STEP 5 (OPTIONAL):
   Fix Problem #5: Add virtual destructors - Best practice improvement

================================================================================
                         ESTIMATED TIME TO FIX
================================================================================

Problem #1 (DecreaseXDays):      15-30 minutes (requires debugging)
Problem #2 (AddOneYear):         2-5 minutes (copy from AddOneMonth)
Problem #3 (DecreaseOneYear):    2-5 minutes (copy from DecreaseOneMonth)
Problem #4 (#include semicolon): 1 minute (delete character)
Problem #5 (Virtual destructors): 2-3 minutes (add 2 lines)

TOTAL ESTIMATED TIME: 25-45 minutes

================================================================================

Generated: November 25, 2025
Test Suite: 115 comprehensive test cases
Success Rate: 95.65% â†’ Target: 100%

================================================================================

